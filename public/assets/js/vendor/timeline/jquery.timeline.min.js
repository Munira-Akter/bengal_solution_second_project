/*

Content Timeline 3.3

Date organised content slider.

Copyright (c) 2012 Br0 (shindiristudio.com)

Project site: http://codecanyon.net/
Project demo: http://shindiristudio.com/timeline

*/
"use strict";
var my_styel_4_resize_image,my_500px_window_function,my_scale_items_12,my_slider_set_timeout_12,monthsDays,minM,minY,maxM,maxY,dy,my_autoplay_function_12,my_slider_mouse_leave_arrows,my_center_style_3;!function(a){var b={init:function(b){var d,e,c=a.extend({my_debug:0,autoplay:!1,autoplay_mob:!1,itemClass:".item",itemOpenClass:".item_open",openTriggerClass:".item",closeText:"Close",itemMargin:10,scrollSpeed:500,startItem:"last",easing:"easeOutSine",categories:["January","February","March","April","May","June","July","August","September","October","November","December"],nuberOfSegments:[31,29,31,30,31,30,31,31,30,31,30,31],yearsOn:!0,swipeOn:!0,hideTimeline:!1,hideControles:!1,closeItemOnTransition:!1},b),f=function(){var a=document.createElement("div"),b=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var c in b)if(void 0!==a.style[b[c]])return d=b[c].replace("Perspective","").toLowerCase(),e="-"+d+"-transform",!0;return!1}();window.console&&c.my_debug&&console.log("width",{my_pfx:d,my_prop:e,my_transitions:f});var g=c.my_debug,h=this,j=(a("body"),h.find(c.itemClass)),k=h.find(c.itemOpenClass),l=j.first().width(),m=k.first().width();c.closeItemOnTransition;my_styel_4_resize_image=function(b){g&&window.console&&console.log("Resize image"),h.find(".item").each(function(b,c){var d=a(c).find(".my_share_items").css("padding-top");d=parseFloat(d);var e=a(c).find(".con_borderImage").offset().top,f=a(c).find(".con_borderImage").height();e+=f;var h=a(c).find(".my_timeline_content").offset().top,i=a(c).find(".con_borderImage").offset().top-a(c).offset().top,j=a(c).find(".my_timeline_content").height();if(g&&window.console&&console.log("Resize image",{rel_pos_image:i,h:f,h_content:j,padd:d,bott:e,bott_1:h}),e>h){var k=Math.abs(e-h),f=a(c).find(".con_borderImage").height();"undefined"==typeof a(c).data("my-height")&&a(c).data("my-height",f),f-=k,a(c).find(".con_borderImage").height(f);var l=k/2;a(c).find(".con_borderImage img").css("top","-"+l+"px"),g&&window.console&&console.log("Resize image for diff",{diff:k})}else{var f;"undefined"!=typeof a(c).data("my-height")&&(f=a(c).data("my-height"),a(c).find(".con_borderImage").height(f)),a(c).find(".con_borderImage img").css("top",""),g&&window.console&&console.log("Resize image for return to original sized")}})},my_500px_window_function=function(){var a=c.my_trigger_width,b=c.my_debug,d=parseFloat(c.my_sizes.card.item_width),e=parseFloat(c.my_sizes.active.item_width),f=parseFloat(c.my_sizes.card.margin),g=h.width();g-=f,b&&window.console&&console.log("Item width",{c_w:g,i_w:d,o_w:e});var i=1,j=1;if(g<=a){if(g<d){i=g/d;var k=-Math.abs(g-d)/2;if(h.find(".item .con_borderImage img").css("left",k+"px"),h.find(".item").width(g),h.find(".my_timeline_content").length>0){var l=h.find(".my_timeline_content").css("margin-left"),m=parseFloat(l);h.find(".my_timeline_content").width(g-2*m)}}else if(h.find(".item").width(d),h.find(".item .con_borderImage img").css("left",""),h.find(".my_timeline_content").length>0){var l=h.find(".my_timeline_content").css("margin-left"),m=parseFloat(l);h.find(".my_timeline_content").width(d-2*m)}if(g<e){var n=-Math.abs(g-e)/2;h.find(".item_open a.con_borderImage").css("left",n+"px"),j=g/e,h.find(".item_open").data("my-width",g),h.find(".item_open").width(g),h.find(".item_open_cwrapper").width(g)}else h.find(".item_open a.con_borderImage").css("left",""),h.find(".item_open").data("my-width",e),h.find(".item_open").width(e),h.find(".item_open_cwrapper").width(e)}else{if(g<d){i=g/d;var k=-Math.abs(g-d)/2;if(h.find(".item .con_borderImage img").css("left",k+"px"),h.find(".item").width(g),h.find(".my_timeline_content").length>0){var l=h.find(".my_timeline_content").css("margin-left"),m=parseFloat(l);h.find(".my_timeline_content").width(g-2*m)}}else if(h.find(".item").width(d),h.find(".item .con_borderImage img").css("left",""),h.find(".my_timeline_content").length>0){var l=h.find(".my_timeline_content").css("margin-left"),m=parseFloat(l);h.find(".my_timeline_content").width(d-2*m)}if(g<e){var n=-Math.abs(g-e)/2;h.find(".item_open a.con_borderImage").css("left",n+"px"),j=g/e,h.find(".item_open").data("my-width",g),h.find(".item_open").width(g),h.find(".item_open_cwrapper").width(g)}else h.find(".item_open a.con_borderImage").css("left",""),h.find(".item_open").data("my-width",e),h.find(".item_open").width(e),h.find(".item_open_cwrapper").width(e)}return h.find(".item_open").data("my-scale",j),h.find(".item_open").data("my-cnt-width",g),b&&window.console&&console.log("Scale new function",{my_scale:i,my_scale_open:j}),i};var o=1,p="";o=my_500px_window_function(),h.trigger("init.Timeline");var q=j.length-1;"first"==c.startItem?q=0:"last"==c.startItem?q=j.length-1:j.each(function(b){if(c.startItem==a(this).attr("data-id"))return q=b,!0}),j.each(function(b){a(this).attr("data-count",b),a(this).next(c.itemOpenClass).attr("data-count",b),a(this).hasClass(c.openTriggerClass)||(a(this).find(c.openTriggerClass).attr("data-count",b),a(this).find(".my_read_more").attr("data-count",b))}),h.append('<div style="clear:both"></div>'),h.css({width:"100%",overflow:"hidden",marginLeft:"auto",marginRight:"auto","text-align":"center",height:0}),h.wrapInner('<div class="timeline_items" />'),h.find(".timeline_items").css("text-align","left"),"ontouchstart"in window&&h.addClass("timelineTouch"),h.wrapInner('<div class="timeline_items_holder" />'),c.hideControles||h.append('<div class="t_controles"><div class="t_left"></div><div class="t_right"></div></div>'),h.wrapInner('<div class="timeline_items_wrapper" />'),h.find(".timeline_items_holder").css({width:r+"px",marginLeft:"auto",marginRight:"auto"});var r=h.width(),s=h.find(".item").width();my_scale_items_12=function(a){var b=h.data("timeline"),c=h.find(".timeline_items:first"),d=h.data("my_settings"),e=q;"undefined"!=typeof b&&"undefined"!=b.currentIndex&&(e=b.currentIndex);var f=h.width(),j=(h.find(".item").width(),f),k=1,l=h.find(".item").width();if(g&&window.console&&console.log("Reposition element",{containerWidth:j,itemWidth:l}),(a<1||1==a)&&""!=k&&"undefined"!=typeof d){0==e&&(v=a<1?0:(j-l-d.itemMargin)/2),e>0&&(v=a<1?-e*l-e*d.itemMargin:-e*(l+d.itemMargin)+(j-l-d.itemMargin)/2),g&&window.console&&console.log("Scale margin Margin",{width:y,start:e,margin:v});var j;c.css({marginLeft:v}),b.margin=v}return"undefined"!=typeof b&&(g&&window.console&&console.log("Get scale factor",{my_scale_1:b.my_scale_1}),b.my_scale_1=a),a},o=my_scale_items_12(o),l=j.first().width(),window.console&&c.my_debug&&console.log("width",{itemWidth:l,width:r,item:s,my_scale:o}),j.css({paddingLeft:0,paddingRight:0,marginLeft:c.itemMargin/2,marginRight:c.itemMargin/2,float:"left",position:"relative"}),k.each(function(){a(this).prepend('<div class="t_close" data-count="'+a(this).attr("data-count")+'" data-id="'+a(this).attr("data-id")+'">'+c.closeText+"</div>"),a(this).wrapInner('<div class="'+c.itemOpenClass.substr(1)+'_cwrapper"  />').find("div:first").css({position:"relative"}),a(this).css({width:0,padding:0,margin:0,float:"left",display:"none",position:"relative",overflow:"hidden"})});var t=h.find(".timeline_items:first"),v=(h.find(".t_line_wrapper:first"),150-(l+c.itemMargin)*(.5+q)),w=(l+c.itemMargin)*j.length+(m+c.itemMargin)+660,x=h.data("timeline"),y=h.width(),A=h.find(".timeline_items_wrapper").width();0==q&&(v=o<1?0:(A-l-c.itemMargin)/2),q>0&&(v=o<1?-q*l-q*c.itemMargin:-q*(l+c.itemMargin)+(A-l-c.itemMargin)/2),window.console&&c.my_debug&&console.log("Margin",{width:y,start:q,margin:v}),t.css({width:w,marginLeft:v}),x||h.data("timeline",{currentIndex:q,itemCount:j.length,margin:v,itemWidth:l,itemOpenWidth:m,lineMargin:0,lineViewCount:0,options:c,items:j,iholder:t,open:!1,noAnimation:!1,marginResponse:!1,mousedown:!1,my_open_item_center_12:!1,mousestartpos:0}),c.my_scale=o,c.my_width_12=h.find(".timeline_items_wrapper").width(),c.hideTimeline||(h.timeline("createElements"),h.hasClass("timelineClean"));var x=h.data("timeline");x.my_scale=o,x.my_scale_1=o,h.data("my_settings",c),h.timeline("my_debug","Autoplay set timeout",c),h.hasClass("my_style_style_4")&&my_styel_4_resize_image(o),c.my_autoplay_function="",c.my_stop_autoplay=!1,my_autoplay_function_12=function(){h.timeline("my_autoplay")},c.autoplay&&(h.timeline("my_debug","AutoplayStep",c.autoplay_step),c.is_mobile&&c.autoplay_mob?(h.timeline("my_debug","Autoplay for mobil",c.autoplay_mob),c.my_autoplay_function=setTimeout(my_autoplay_function_12,c.autoplay_step),h.data("my_settings",c),h.bind("touchstart",function(a){c.my_stop_autoplay=!0,h.timeline("my_debug","Autoplay touch stop autoplay"),h.data("my_settings",c)}),h.bind("touchend",function(a){c.my_stop_autoplay=!1,h.timeline("my_debug","Autoplay touch end set new timeout"),h.data("my_settings",c),""!=c.my_autoplay_function&&(clearTimeout(c.my_autoplay_function),c.my_autoplay_function=setTimeout(my_autoplay_function_12,4*c.autoplay_step),h.data("my_settings",c))})):c.is_mobile||(h.timeline("my_debug","Autoplay set timeout",c.autoplay_step),c.my_autoplay_function=setTimeout(my_autoplay_function_12,c.autoplay_step),h.data("my_settings",c),h.bind("mouseenter",function(a){c.my_stop_autoplay=!0,h.timeline("my_debug","Autoplay mouseover clear timeout"),h.data("my_settings",c)}),h.bind("mouseleave",function(a){c.my_stop_autoplay=!1,h.timeline("my_debug","Autoplay set timeout mouseout"),h.data("my_settings",c)})));var B=h.find(".item").height(),C=0;B-=C;var D=h.find(".timeline_items_wrapper").css("margin-top");h.find(".t_left , .t_right").css({top:D,height:B+"px"});var E="";h.find(".t_left , .t_right").on("click",function(){});h.find(".t_left , .t_right").on("mouseenter",function(b){var c=a(this);my_slider_set_timeout_12=setTimeout(function(a){c.finish(),h.find(".timeline_items_holder").finish("my_left_12");var b=c.width();c.data("my-w-12",b),b+=20;var d=h.find(".timeline_items").css("margin-left");h.find(".timeline_items").data("my-l-12",d),d=parseFloat(d),h.timeline("my_debug","mouse eneter",{w:b,m_l:d}),c.hasClass("t_left")?(d=100,E="t_left"):(E="t_right",d=-100),c.animate({width:b},350,function(){}),h.find(".timeline_items_holder").animate({"margin-left":d,queue:"my_left_12"},350),my_slider_set_timeout_12="";h.data("timeline")},130)}),my_slider_mouse_leave_arrows=function(b){if(""!=my_slider_set_timeout_12)return void clearTimeout(my_slider_set_timeout_12);a(this).finish(),h.find(".timeline_items_holder").finish("my_left_12");var c=a(this).width();c-=20;var d=h.find(".timeline_items").css("margin-left");d=parseFloat(d),h.timeline("my_debug","Mouse leave",{w:c,m_l:d,cl:E}),d=0,a(this).animate({width:c},350,function(){}),h.find(".timeline_items_holder").animate({"margin-left":d,queue:"my_left_12"},350)},h.on("mouseleave",function(a){h.find(".t_left , .t_right").animate({opacity:0},150)}),h.on("mouseenter",function(a){h.find(".t_left , .t_right").animate({opacity:1},150)}),h.find(".t_left , .t_right").on("mouseleave",my_slider_mouse_leave_arrows),my_center_style_3=function(){h.attr("class");h.hasClass("my_style_style_3")&&h.find(c.itemClass).each(function(b,c){var d=h.find("img").height(),e=a(c).find(".my_timeline_content").outerHeight(),f=h.find(".item").height(),g=f-d-e,i=0;g>0&&(i=g/2),h.timeline("my_debug","Center style",{image_h:d,t_h:e,it_h:f,top:g,p:i}),0!=i&&a(c).find(".my_timeline_content").css("bottom",i+"px")})},my_center_style_3(),a(document).keydown(function(a){return 37==a.keyCode?(h.timeline("left"),!1):39==a.keyCode?(h.timeline("right"),!1):void 0}),a(window).resize(function(){var a=h.width(),b=h.find(".t_line_holder").width(),c=a-b;if(c<60&&c>0&&c>0){var d=c/2+4;h.find("#t_line_left").css("left","-"+d+"px"),h.find("#t_line_right").css("right","-"+d+"px")}var e=h.width();h.hasClass("my_style_style_4")&&my_styel_4_resize_image(o),h.find(".timeline_items_holder").css({width:e+"px"}),o=my_500px_window_function(),my_scale_items_12(o),g&&window.console&&console.log("Scale factor",o),my_500px_window_function();var f=h.data("my_settings");f.my_scale=o,h.data("my_settings",f);var i=h.data("timeline");i.my_resize_12=!0;var l,k=h.find(".timeline_items_wrapper").width();l=h.find(".item_open").width();var m=h.find(".item_open").data("my-scale");if(i.open&&"undefined"!=typeof i){var q=(j.eq(i.currentIndex).attr("data-id"),0);l=i.itemOpenWidth;var r=h.find(".item_open").data("my-width");"undefined"!=typeof r&&(h.timeline("my_debug","Open Change open width",{width:l,my_width_12:r}),l=r),h.timeline("my_debug","Resize scale factors",{my_scale:o,my_scale_open:m});var k=h.find(".timeline_items_wrapper").width();if(o<1||m<1){var t=h.find(".item").width(),u=t,v=k;if(m<1&&1==o){var w=Math.abs(v-u-i.options.itemMargin)/2;q=-(w+i.options.itemMargin+u)}else q=o<1?-(k+l)/2:-((u+i.options.itemMargin+l)/2);h.timeline("my_debug","Resize Calculate position scale<1",{itemWidth:u,openWidth:l,containerWidth:k,my_scale_1:p,my_scale:o,my_diff_pos:q}),i.my_diff_pos=q}else q=-(i.itemWidth+i.options.itemMargin)/2-(l+i.options.itemMargin)/2,h.timeline("my_debug","Resize Calculate position scale==1",{my_scale:o,my_diff_pos:q}),f.my_width_12=k,i.my_diff_pos=q;i.margin+=q,h.timeline("my_debug","Data margin",{my_scale:o,my_diff_pos:q,margin:i.margin}),i.iholder.css("margin-left",i.margin)}}),a(document).ready(function(){a(".timeline_items .item img").on("dragstart",function(b){a(this).hasClass("timeline_rollover_bottom")||b.preventDefault()}),a(".timeline_items .timeline_rollover_bottom").on("dragstart",function(b){a(this).addClass("disableClick"),b.preventDefault()}),a(".timeline_items .timeline_rollover_bottom").on("mousedown",function(b){a(this).is("hover")||a(this).removeClass("disableClick")}),a(".timeline_items .timeline_rollover_bottom").on("click",function(b){a(this).hasClass("disableClick")&&(b.preventDefault(),b.stopPropagation()),a(this).removeClass("disableClick")})}),h.find(".t_left").click(function(){var a=h.data("timeline"),b=a.options.scrollSpeed,c=!1;a.my_click_12_left=!1,a.currentIndex>0&&(c=!0,h.find(".t_left , .t_right").animate({opacity:0},100),a.my_click_12_left=!0),h.timeline("left"),c&&setTimeout(function(){h.find(".t_left , .t_right").animate({opacity:1},100),a.my_click_12_left=!1},b)}),h.find(".t_right").click(function(){var a=h.data("timeline"),b=a.options.scrollSpeed,c=!1;a.my_click_12_right=!1,a.currentIndex<a.itemCount-1&&(c=!0,a.my_click_12_right=!0,h.find(".t_left , .t_right").animate({opacity:0},100)),h.timeline("right"),c&&setTimeout(function(){h.find(".t_left , .t_right").animate({opacity:1},100),a.my_click_12_right=!1},b)}),c.swipeOn&&(j.find("*").each(function(){a(this).css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"})}),h.bind("touchstart",function(a){h.timeline("touchStart",a)}),h.find(c.itemClass).mousedown(function(b){a(b.target).attr("class");a(b.target).hasClass("my_open_dialog")||a(b.target).hasClass("my_icon")||h.timeline("mouseDown",b.pageX)}),a(document).bind("touchend",function(a){x=h.data("timeline"),h.timeline("touchEnd",x.touchpos)}),a(document).mouseup(function(b){a(b.target).attr("class");if(!a(b.target).hasClass("my_open_dialog")&&!a(b.target).hasClass("my_icon")){var d=h.data("timeline");"undefined"!=typeof d&&d.mousedown&&h.timeline("mouseUp",b.pageX)}})),h.find(c.openTriggerClass).click(function(){h.timeline("my_debug","Click on read more",{id:a(this).attr("data-id"),count:a(this).attr("data-count")}),h.timeline("goTo",a(this).attr("data-id"),a(this).attr("data-count"),!0)}),h.find(".my_read_more").click(function(){h.timeline("my_debug","Click on read more",{id:a(this).attr("data-id"),count:a(this).attr("data-count")}),h.timeline("goTo",a(this).attr("data-id"),a(this).attr("data-count"),!0)}),h.find(".t_close").click(function(){h.timeline("my_debug","Click cloce open",{id:a(this).attr("data-id"),count:a(this).attr("data-count")}),h.timeline("close",a(this).attr("data-id"),a(this).attr("data-count"))}),h.css({height:"auto"}).show(),h.prev(".timelineLoader").hide(),h.find(".t_line_node").each(function(){a(this).width()<10&&a(this).width(12),a(this).css({marginLeft:-a(this).width()/2})});var G=h.width(),H=h.find(".t_line_holder").width(),I=G-H;if(I<60&&I>0){if(I>0){var J=I/2+4;h.find("#t_line_left").css("left","-"+J+"px"),h.find("#t_line_right").css("right","-"+J+"px")}}else h.find("#t_line_left").css("left",""),h.find("#t_line_right").css("right","");return h},destroy:function(){a(document).unbind("mouseup"),a(window).unbind("resize");var b=this;b.data("timeline");b.removeData("timeline")},touchStart:function(a){var b=this,c=b.data("timeline"),d=0;c.xpos=a.originalEvent.touches[0].pageX,c.ypos=a.originalEvent.touches[0].pageY,c.mousedown=!0,c.touchHorizontal=!1,c.mousestartpos=c.xpos,b.unbind("touchmove"),b.bind("touchmove",function(a){var b=a.originalEvent.touches[0].pageX,e=a.originalEvent.touches[0].pageY;c.mousedown&&!c.touchHorizontal?Math.abs(b-c.xpos)>Math.abs(e-c.ypos)&&(c.touchHorizontal=!0):c.touchHorizontal&&(a.preventDefault(),c.touchpos=a.originalEvent.touches[0].pageX,d=c.margin-c.xpos+a.originalEvent.touches[0].pageX,c.iholder.css("marginLeft",d+"px")),c.mousedown=!1})},mouseDown:function(b){var c=this,d=c.data("timeline"),e=0;d.mousedown=!0,d.mousestartpos=b,a("body").css("cursor","move"),a(document).mousemove(function(a){e=d.margin-b+a.pageX,d.iholder.css("marginLeft",e+"px")})},touchEnd:function(a){var b=this,c=b.data("timeline"),d=c.itemWidth+c.options.itemMargin,e=c.currentIndex,f=0,g=a-c.mousestartpos;d=b.find(".item").width()+c.options.itemMargin;var h=-d/2,i=d/2,j=Math.floor(d/c.options.my_del);j>5&&(j=5),h=-d/j,i=d/j,"undefined"!=typeof c.touchHorizontal&&c.touchHorizontal&&(c.touchHorizontal=!1,e-=parseInt(g/d,10),f=g%d,b.timeline("my_debug","touchend",{xmargin:g,mod:f,my_del:j,my_calc_old_1:h,my_calc_old_2:i}),g<0&&f<h&&e++,g>0&&f>i&&e--,e<0&&(e=0),e>=c.itemCount&&(e=c.itemCount-1),b.timeline("goTo",c.items.eq(e).attr("data-id"),c.items.eq(e).attr("data-count")),c.options.closeItemOnTransition&&b.timeline("close",c.items.eq(e).attr("data-id")))},mouseUp:function(b){var c=this,d=c.data("timeline"),e=d.itemWidth+d.options.itemMargin,f=d.currentIndex,g=0,h=b-d.mousestartpos;d.mousedown=!1,e=c.find(".item").width()+d.options.itemMargin;var i=-e/2,j=e/2,k=Math.floor(e/d.options.my_del);k>5&&(k=5),i=-e/k,j=e/k,a(document).unbind("mousemove"),a("body").css("cursor","auto"),f-=parseInt(h/e,10),g=h%e,c.timeline("my_debug","Mouse Up",{xmargin:h,mod:g,my_del:k,my_calc_old_1:i,my_calc_old_2:j}),h<0&&g<i&&f++,h>0&&g>j&&f--,f<0&&(f=0),f>=d.itemCount&&(f=d.itemCount-1),c.timeline("goTo",d.items.eq(f).attr("data-id"),d.items.eq(f).attr("data-count")),d.options.closeItemOnTransition&&c.timeline("close",d.items.eq(f).attr("data-id"))},open:function(b,c){var d=this,e=d.data("timeline"),f=d.find(e.options.itemOpenClass),g=e.options.scrollSpeed,h=e.itemOpenWidth,i=e.options.easin,j=e.options.itemMargin,k=d.find(".item_open").data("my-width");"undefined"!=typeof k&&(d.timeline("my_debug","Open Change open width",{width:h,my_width_12:k}),h=k),d.find(".item_open_cwrapper").width(h);var l=d.data("my_settings"),m=l.my_scale,n=d.find(".item_open").data("my-scale");if(m<1||n<1){var o=0,p=1,q=1;d.timeline("my_debug","Open Start end pos scale<1",{my_start:o,my_end:p,my_count:q,my_scale:m});var r=d.find(".timeline_items_wrapper").width();d.timeline("my_debug","Open open width",{width:h});var s=d.find(".item").width(),t=s+e.options.itemMargin;d.timeline("my_debug","Open my_scale<1",{itemWidth:s,my_width_1:t})}else{var u=Math.abs(e.margin),r=d.find(".timeline_items_wrapper").width(),v=d.find(".timeline_items_wrapper").offset().left,w=e.margin+r,t=e.itemWidth+e.options.itemMargin,o=Math.floor(Math.abs(u)/t),p=o+Math.ceil(r/t)-1,x=Math.ceil(r/t),y=Math.floor(x/2),z=y;d.timeline("my_debug","Set correct position ",{my_pos_12:y,my_total_items:x,my_width_1:t,my_pos_12:y});var A=Math.ceil(r/t);d.timeline("my_debug","Open open width",{width:h,my_width:r}),d.timeline("my_debug","Open Start end pos scale=1",{id:b,inner:A,data_count:c,left:u,right:w,my_width_1:t,my_start:o,my_end:p}),d.timeline("my_debug","Open Start end pos scale=1",{width:h,my_start_item:o,my_end_item:p});var v,D,E,F,H,J,C=e.currentIndex,L=0;if("undefined"!=typeof e.my_pos_curr&&(d.timeline("my_debug","Open Correct position",{my_curr:C,new_pos:e.my_pos_curr}),C=e.my_pos_curr),d.timeline("my_debug","Open position",{my_curr:C,new_pos:e.my_pos_curr}),e.margin>0&&(o=0,p=o+Math.ceil(r/t)-1,L=0),D=e.margin,E=Math.abs(D),J=E+r/2,d.timeline("my_debug","Open position",{my_margin:D,my_margin_abs:E,my_center_pos:J}),C>0){if(e.margin<0){var M=d.offset().left,N=0;o>0&&(N=t*o),F=N-E,d.timeline("my_debug","Open Calcl left",{my_left_off:M,my_left_off_1:N,my_diff_left:F}),F<0&&(F=t+F),d.timeline("my_debug","Open Calcl left",{my_left_off:M,my_left_off_1:N,my_diff_left:F}),L=E+F,d.timeline("my_debug","Open position",{my_pos_left:L,my_margin:D,my_margin_abs:E,my_center_pos:J})}}else L=e.margin}return f.each(function(){a(this).attr("data-count");if(a(this).attr("data-id")==b&&(!c||c==a(this).attr("data-count"))){d.timeline("my_debug","Set correct position ",{my_pos:z,my_pos_12:y});var k=a(this),n=a(this).attr("data-count");if(0==a(e.options.itemClass+'[data-count="'+n+'"] > .read_more[href="#"]').length||0==a(e.options.itemClass+'[data-count="'+n+'"] > .my_read_more[href="#"]').length){if(d.trigger("itemOpen.Timeline"),a(this).stop(!0).show().animate({width:h,marginLeft:j/2,marginRight:j/2},g,i),"undefined"!=typeof a(this).attr("data-access")&&""!=a(this).attr("data-access")){var o=a(this).attr("data-access");a.post(o,function(b){if(a("body").append('<div class="ajax_preloading_holder" style="display:none"></div>'),a(".ajax_preloading_holder").html(b),a(".ajax_preloading_holder img").length>0)a(".ajax_preloading_holder img").load(function(){k.find(".item_open_content").html(b),a(".ajax_preloading_holder").remove(),a(this).attr("data-access","");var c=jQuery.Event("ajaxLoaded.timeline");c.element=k.find(".item_open_content"),a("body").trigger(c),d.trigger(c);var e=d.find(".item_open").data("my-scale");if(d.timeline("my_debug","My open scale",e),e<1){var f=d.find(".item_open").data("my-cnt-width"),g=parseFloat(l.my_sizes.active.item_width),h=-Math.abs(f-g)/2;d.find(".item_open a.con_borderImage ").css("left",h+"px"),d.timeline("my_debug","My open scale",{cntWidth:f,itemOpenWidth:g,diff:h})}else d.find(".item_open a.con_borderImage ").css("left","")});else{k.find(".item_open_content").html(b),a(".ajax_preloading_holder").remove(),a(this).attr("data-access","");var c=jQuery.Event("ajaxLoaded.timeline");c.element=k.find(".item_open_content"),a("body").trigger(c),d.trigger(c);var e=d.find(".item_open").data("my-scale");if(d.timeline("my_debug","My open scale",e),e<1){var f=d.find(".item_open").data("my-cnt-width"),g=parseFloat(l.my_sizes.active.item_width),h=-Math.abs(f-g)/2;d.find(".item_open a.con_borderImage ").css("left",h+"px"),d.timeline("my_debug","My open scale",{cntWidth:f,itemOpenWidth:g,diff:h})}else d.find(".item_open a.con_borderImage ").css("left","")}})}var p=d.find(".item_open").data("my-scale");if(d.timeline("my_debug","My open scale",p),p<1){var q=d.find(".item_open").data("my-cnt-width"),s=parseFloat(l.my_sizes.active.item_width),u=-Math.abs(q-s)/2;d.timeline("my_debug","My open scale",{cntWidth:q,itemOpenWidth:s,diff:u}),d.find(".item_open a.con_borderImage ").css("left",u+"px")}else d.find(".item_open a.con_borderImage ").css("left","");if(a("body").width()<767?e.marginResponse=!0:e.marginResponse=!1,1==m&&1==p){if(D=e.margin,E=Math.abs(D),J=E+r/2,d.timeline("my_debug","Open position",{my_pos:z,my_width_1:t,my_pos_left:L,my_margin:D,my_margin_abs:E,my_center_pos:J}),d.timeline("my_debug","Open position",{my_curr:C,new_pos:e.my_pos_curr}),e.margin>0)J=r/2,L=J+h,H=-(t/2+h/2);else if(C>0)if(z>0)if(L+=z*t,d.timeline("my_debug","Open Position left is ",{my_pos_left:L,my_center_pos:J}),L>J)L+=h/2,H=J-L;else{var w=J-L,x=h-w;x<h?H=-x/2:(L-=h/2,H=J-L),d.timeline("my_debug","Open Position is smaller",{my_diff_1:w,my_diff_2:x,my_diff_pos:H})}else if(L+=z*t,d.timeline("my_debug","Open Position left is ",{my_pos_left:L,my_center_pos:J}),L>J)L+=h/2,H=J-L;else{var w=J-L,x=h-w;x<h?H=-x/2:(L-=h/2,H=J-L)}else H=-(t/2+h/2);H-=e.options.itemMargin/2,e.my_diff_pos=H,d.timeline("my_debug","Open Position",{my_diff_1:w,my_width:r,my_width_1:t,my_pos_left:L,my_pos:z,my_left:v,my_diff_left:F,my_curr:C,margin_abs:E,my_center_pos:J,my_diff_pos:H,margin:e.margin})}else{var A=h,B=d.find(".item").width(),G=B,q=r,p=d.find(".item_open").data("my-scale");if(p<1&&1==m){var I=Math.abs(q-G-e.options.itemMargin)/2;H=-(I+e.options.itemMargin+G)}else H=-(h/2+t/2+e.options.itemMargin/2);d.timeline("my_debug","Open Position",{my_o_12_w:A,my_scale:m,my_diff_pos:H}),e.my_diff_pos=H}e.margin+=H,e.open=b,e.my_count=a(this).attr("data-count")}}}),d},close:function(b,c,d){var e=this,f=e.data("timeline"),g=e.find(f.options.itemOpenClass),h=f.options.scrollSpeed,j=(f.itemOpenWidth,f.options.easing),k=f.margin,l=e.find(".timeline_items_wrapper").width(),n=(f.margin+l,f.itemWidth+f.options.itemMargin),o=Math.floor(Math.abs(k)/n);o+Math.floor(l/n);return g.each(function(){a(this).attr("data-count");if(a(this).attr("data-id")==b&&a(this).is(":visible")){e.trigger("itemClose.Timeline");a(this).attr("data-count")-o;a(this).stop(!0).animate({width:0,margin:0},h,j,function(){a(this).hide()}),f.margin+=Math.abs(f.my_diff_pos),f.iholder.stop(!0).animate({marginLeft:f.margin},h,j),f.open=!1}}),c&&(0!=a(this).find('.item[data-count="'+d+'"] a.read_more[href="#"]').length&&0!=a(this).find('.item[data-count="'+d+'"] a.my_read_more[href="#"]').length||(e.timeline("my_debug","Close Open an item",{idOpen:c,dataCount:d}),e.timeline("open",c,d))),e},my_debug:function(a,b){var c=this,d=c.data("my_settings");d.my_debug&&window.console&&console.log("Timeline\n"+a,b)},my_autoplay:function(){var b=this,c=b.data("timeline"),f=(c.options.scrollSpeed,c.options.easing,b.data("my_settings"));if(f.my_stop_autoplay||c.open||a(".pp_fade").is(":visible")){b.timeline("my_debug","Autoplay is disabled",{s:f});var g=f.autoplay_step;return f.is_mobile&&(g*=4),f.my_autoplay_function=setTimeout(my_autoplay_function_12,g),void b.data("my_settings",f)}c.currentIndex==c.itemCount-1?f.my_dir="left":0==c.currentIndex?f.my_dir="right":"undefiined"==typeof f.my_dir&&(f.my_dir="right"),"right"==f.my_dir?b.timeline("right"):b.timeline("left"),b.data("my_settings",f),b.timeline("my_debug","Autoplay",f.my_dir),setTimeout(function(){f.my_autoplay_function=setTimeout(my_autoplay_function_12,f.autoplay_step),b.data("my_settings",f)},f.scrollSpeed)},right:function(){var a=this,b=a.data("timeline"),c=b.options.scrollSpeed,d=b.options.easing;if(b.currentIndex<b.itemCount-1){var e=b.items.eq(b.currentIndex+1).attr("data-id"),f=b.items.eq(b.currentIndex+1).attr("data-count");a.timeline("goTo",e,f),b.options.closeItemOnTransition&&a.timeline("close",e)}else b.iholder.stop(!0).animate({marginLeft:b.margin-50},c/2,d).animate({marginLeft:b.margin},c/2,d);return a},left:function(){var a=this,b=a.data("timeline"),c=b.options.scrollSpeed,d=b.options.easing;if(b.currentIndex>0){var e=b.items.eq(b.currentIndex-1).attr("data-id"),f=b.items.eq(b.currentIndex-1).attr("data-count");a.timeline("goTo",e,f),b.options.closeItemOnTransition&&a.timeline("close",e)}else b.iholder.stop(!0).animate({marginLeft:b.margin+50},c/2,d).animate({marginLeft:b.margin},c/2,d);return a},goTo:function(b,c,d){var e=this,f=e.data("timeline"),g=f.options.scrollSpeed,h=f.options.easing,i=f.items,k=(e.find(".timeline_line").width(),-1),l=!1,m=e.data("my_settings"),n=m.my_scale;if(e.timeline("my_debug","Go to scale",{id:b,data_count:c,scale:n}),f.my_open_item_center_12)return void e.timeline("my_debug","open item return");if(i.each(function(d){if(b==a(this).attr("data-id")&&(!c||c==a(this).attr("data-count")))return l=!0,k=d,!1}),l){var o=e.find(".t_line_node");o.removeClass("active");var p=o.parent().parent().find('[href="#'+b+'"]').addClass("active");f.lineMargin=100*-parseInt(p.parent().parent().attr("data-id"),10),e.find(".t_line_view:first").width()>e.find(".timeline_line").width()&&(f.lineMargin*=2,p.parent().hasClass("right")&&(f.lineMargin-=100)),f.noAnimation?(f.noAnimation=!1,e.find(".t_line_wrapper").stop(!0).css({marginLeft:f.lineMargin+"%"})):e.find(".t_line_wrapper").stop(!0).animate({marginLeft:f.lineMargin+"%"},g,h),f.open?(e.timeline("close",f.open,b,c),delete f.my_pos_curr,e.timeline("my_debug","Go to Close postion",f.open)):d&&(delete f.my_pos_curr,e.timeline("my_debug"," Go To Open postion",d),e.timeline("open",b,c),delete f.my_pos_curr),delete f.my_pos_curr,e.trigger("scrollStart.Timeline");var q=f.currentIndex,r=e.find(".item").width();1==n?f.margin+=(r+f.options.itemMargin)*(f.currentIndex-k):f.margin+=(f.currentIndex-k)*r+(f.currentIndex-k)*f.options.itemMargin,f.currentIndex=k,e.timeline("my_debug","Go To Count",{curr:f.currentIndex,width:f.itemWidth,my_scale:n,count:k,pre:q,margin:f.margin});var s=e.find(".timeline_items_wrapper").width(),t=f.margin+(f.current_index-k)*(f.itemWidth+f.itemMargin)+(s-f.itemWidth-f.itemMargin)/2;e.timeline("my_debug","Go to Count",{count:k,pre:q,margin:f.margin,my_margin:t});var u=(parseInt(f.iholder.css("margin-left"),10)-f.margin)/f.itemWidth;f.iholder.stop(!0).animate({marginLeft:f.margin},g+g/5*(Math.abs(u)-1),h,function(){e.trigger("scrollStop.Timeline")})}return e},lineLeft:function(){var a=this,b=a.data("timeline"),c=b.options.scrollSpeed,d=b.options.easing;0!=b.lineMargin&&b.options.categories&&(b.lineMargin+=100,a.find(".t_line_wrapper").stop(!0).animate({marginLeft:b.lineMargin+"%"},c,d))},lineRight:function(){var a=this,b=a.data("timeline"),c=b.options.scrollSpeed,d=b.options.easing;if(a.find(".t_line_view:first").width()>a.find(".timeline_line").width())var e=2*b.lineViewCount;else var e=b.lineViewCount;b.lineMargin!=100*-(e-1)&&b.options.categories&&(b.lineMargin-=100,a.find(".t_line_wrapper").stop(!0).animate({marginLeft:b.lineMargin+"%"},c,d))},createElements:function(){var b=this,c=b.data("timeline"),d=c.items,e='\n    <div class="timeline_line" style="text-align: left; position:relative; margin-left:auto; margin-right:auto;">\n  </div>\n';b.prepend(e);var g=(b.find(".timeline_line").width(),new Array),h=[""].concat(c.options.categories);monthsDays=[0].concat(c.options.nuberOfSegments),minM=h.length,minY=99999,maxM=0,maxY=0,c.options.yearsOn||(maxY=99999);var i={};c.options.categories||(d.each(function(){var b=a(this).attr("data-id"),c=b.split("/"),d=parseInt(c[0],10);a.inArray(c[1],h)!=-1?a.inArray(c[1],h):parseInt(c[1],10),parseInt(c[2],10);d<minY&&(minY=d),d>maxY&&(maxY=d)}),minY-=10,maxY+=10);var j=2e6,k=0,l=0,m={};c.options.my_is_years&&(d.each(function(b){var c=a(this).attr("data-id"),f=(a(this).attr("data-name"),a(this).attr("data-description"),c.split("/")),g=parseInt(f[0],10);"undefined"==typeof i[g]&&(l++,m[g]=l),g<j&&(j=g),g>k&&(k=g)}),window.console&&c.options.my_debug&&console.log("Min max years",{min:j,max:k,yearsCount:l}));var n=0,o=-1,p={},q={},r=!0;if(d.each(function(b){var d=a(this).attr("data-id"),e=a(this).attr("data-name"),f=a(this).attr("data-description"),j=d.split("/"),k=parseInt(j[0],10),s=a.inArray(j[1],h)!=-1?a.inArray(j[1],h):parseInt(j[1],10),t=parseInt(j[2],10);if(c.options.my_is_years)if(l<=18){"undefined"==typeof p[0]&&(p[0]=[]);var w,u=b==c.currentIndex?" active":"";m[t];w=100/(l+1)*(b+1);var u=b==c.currentIndex?" active":"",y="undefined"!=typeof e?e:k;if(g[d]='<a href="#'+d+'" class="t_line_node'+u+'" style="left: '+w+'%; position:absolute; text-align:center;">'+y,"undefined"!=typeof f&&(g[d]+='<span class="t_node_desc '+(f?"":"t_node_desc_empty")+'" style="white-space:nowrap; position:absolute; z-index: 1;" ><span>'+f+"</span></span>"),g[d]+="</a>\n","undefined"==typeof i[t]){window.console&&c.options.my_debug&&console.log("ADD Segemnt",{year:t,count:o}),i[t]={},0==n?q[0]=t+"-":n==c.options.my_show_years-1?q[0]+=t:b==l-1&&(q[0]+=t);var z=p[0].length;
p[0][z]=g[d],n++}}else{r&&n%c.options.my_show_years==0&&(o++,n=0),"undefined"==typeof p[o]&&(p[o]=[]);var w,u=b==c.currentIndex?" active":"";m[t];w=100/(c.options.my_show_years+1)*(n+1);var y="undefined"!=typeof e?e:k;if(g[d]='<a href="#'+d+'" class="t_line_node'+u+'" style="left: '+w+'%; position:absolute; text-align:center;">'+y,"undefined"!=typeof f&&(g[d]+='<span class="t_node_desc '+(f?"":"t_node_desc_empty")+'" style="white-space:nowrap; position:absolute; z-index: 1;" ><span>'+f+"</span></span>"),g[d]+="</a>\n","undefined"==typeof i[t]){r=!0,window.console&&c.options.my_debug&&console.log("ADD Segemnt",{year:t,count:o}),i[t]={},0==n?q[o]=t+"-":n==c.options.my_show_years-1?q[o]+=t:b==l-1&&(q[o]+=t);var z=p[o].length;p[o][z]=g[d],n++}else 0==n&&(r=!1)}else{"undefined"==typeof i[t]&&(i[t]={}),"undefined"==typeof i[t][s]&&(i[t][s]={}),i[t][s][k]=d;var u=b==c.currentIndex?" active":"";if(c.options.categories){var w;w=100/monthsDays[s]*k}else var w=100/(maxY-minY)*(k-minY);var y="undefined"!=typeof e?e:k;g[d]='<a href="#'+d+'" class="t_line_node'+u+'" style="left: '+w+'%; position:absolute; text-align:center;">'+y,"undefined"!=typeof f&&(g[d]+='<span class="t_node_desc '+(f?"":"t_node_desc_empty")+'" style="white-space:nowrap; position:absolute; z-index: 1;" ><span>'+f+"</span></span>"),g[d]+="</a>\n"}}),e='\n  <div id="t_line_left" style="position: absolute;"></div><div id="t_line_right" style="position: absolute;"></div>\n  <div class="t_line_holder" style="position:relative; overflow: hidden; width:100%;">\n   <div class="t_line_wrapper" style="white-space:nowrap;">\n',c.options.categories){if(c.options.my_is_years){var t=0,u=!0;window.console&&c.options.my_debug&&(console.log("Years sefgments",p),console.log("Years segemnts str",q)),l<=18?(e+='<div class="t_line_view" data-id="'+t+'" style="position:relative; display:inline-block; width:100%;">\n     <div class="t_line_m" style="width:100%; border:0; position:absolute; top:0;">\n',a.each(p[0],function(a,b){e+=b}),e+="</div>\n</div>"):(a.each(p,function(b,d){u?(u=!u,e+='<div class="t_line_view" data-id="'+t+'" style="position:relative; display:inline-block;">\n     <div class="t_line_m" style="position:absolute; top:0;">\n      <h4 class="t_line_month" style="position:abolute; width:100% top:0; text-align:center;">'+(c.options.yearsOn?'<span class="t_line_month_year">'+q[b]+"</span>":"")+"</h4>\n",a.each(d,function(a,b){e+=b}),e+="     </div> <!-- KRAJ PRVOG -->\n"):(u=!u,e+='     <div class="t_line_m right" style="position:absolute; top:0;">\n      <h4 class="t_line_month" style="position:abolute; width:100% top:0; text-align:center;">'+(c.options.yearsOn?'<span class="t_line_month_year"> '+q[b]+"</span>":"")+"</h4>\n",a.each(d,function(a,b){e+=b}),e+='     </div><!-- KRAJ DRUGOG -->\n     <div style="clear:both"></div>\n    </div>',t++)}),u||(e+='     <div class="t_line_m right" style="position:absolute; top:0;">\n      <h4 class="t_line_month" style="position:abolute; width:100% top:0; text-align:center;"></h4>\n     </div>\n     <div style="clear:both"></div>\n    </div>',t++))}else{var u=!0,t=0;for(var w in i)for(var x in i[w])if(u){u=!u,e+='<div class="t_line_view" data-id="'+t+'" style="position:relative; display:inline-block;">\n     <div class="t_line_m" style="position:absolute; top:0;">\n      <h4 class="t_line_month" style="position:abolute; width:100% top:0; text-align:center;">'+h[x]+(c.options.yearsOn?'<span class="t_line_month_year"> '+(w<0?-w+" B.C.":w)+"</span>":"")+"</h4>\n";for(dy in i[w][x])e+=g[i[w][x][dy]];e+="     </div> <!-- KRAJ PRVOG -->\n"}else{u=!u,e+='     <div class="t_line_m right" style="position:absolute; top:0;">\n      <h4 class="t_line_month" style="position:abolute; width:100% top:0; text-align:center;">'+("undefined"!=typeof h[x]?h[x]:"")+(c.options.yearsOn?'<span class="t_line_month_year"> '+w+"</span>":"")+"</h4>\n";for(dy in i[w][x])e+=g[i[w][x][dy]];e+='     </div><!-- KRAJ DRUGOG -->\n     <div style="clear:both"></div>\n    </div>',t++}u||(e+='     <div class="t_line_m right" style="position:absolute; top:0;">\n      <h4 class="t_line_month" style="position:abolute; width:100% top:0; text-align:center;"></h4>\n     </div>\n     <div style="clear:both"></div>\n    </div>',t++)}e+='\n    <div style="clear:both"></div>\n   </div>\n  </div>\n'}else{e+='<div class="t_line_view" data-id="'+t+'" style="position:relative; display:inline-block; width:100%;">\n     <div class="t_line_m" style="width:100%; border:0; position:absolute; top:0;">\n';for(var s in g)e+=g[s];e+="</div>\n</div>"}c.lineViewCount=t,b.find(".timeline_line:first").html(e),b.find(".t_line_node").each(function(){var e=a(this);a(this).find("span").hide(),a(this).hover(function(){d.each(function(){a(this).attr("data-id")==e.attr("href").substr(1)&&a(this).addClass("item_node_hover")});var b=a(this).parents(".timeline"),c=b.data("my_settings");if(b.timeline("my_debug","Hover",{s:c}),0==c.is_mobile){var f=a(this).parents(".t_line_view").data("id"),g=b.find(".t_line_view");g.each(function(b,c){var d=a(c).data("id");d!=f&&a(c).css("visibility","hidden")}),b.find(".t_line_holder").css("overflow",""),a(this).find("span").css("display","block")}},function(){var b=a(this).parents(".timeline"),c=b.data("my_settings");if(b.timeline("my_debug","Hover out",{s:c}),0==c.is_mobile){b.find(".t_line_holder").css("overflow","hidden");var d=a(this).parents(".t_line_view").data("id"),e=b.find(".t_line_view");e.each(function(b,c){var e=a(c).data("id");e!=d&&a(c).css("visibility","visible")}),a(this).find("span").css("display","none"),a(".item_node_hover").removeClass("item_node_hover")}}),a(this).hasClass("active")&&(c.lineMargin=100*-parseInt(a(this).parent().parent(".t_line_view").attr("data-id"),10),b.find(".t_line_wrapper").css("margin-left",c.lineMargin+"%")),a(this).click(function(d){d.preventDefault(),b.find(".t_line_node").removeClass("active"),a(this).addClass("active"),b.timeline("goTo",a(this).attr("href").substr(1)),c.options.closeItemOnTransition&&b.timeline("close",a(this).attr("href").substr(1))})}),b.find("#t_line_left").click(function(){b.timeline("lineLeft")}),b.find("#t_line_right").click(function(){b.timeline("lineRight")})}};a.fn.timeline=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.timeline"):b.init.apply(this,arguments)}}(jQuery);